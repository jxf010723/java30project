<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/member_info.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <script th:src="@{js/jquery-1.12.4.js}"></script>
    <script th:src="@{js/bootstrap.js}"></script>
    <script type="text/javascript" th:src="@{js/vue.js}"></script>
    <style type="text/css">
		.addUserDialog .list {
		    float: left;
		    margin-bottom: 14px;
		    width: 340px;
		}
		.addUserDialog .list span {
		    float: left;
		    width: 50px;
		    padding-top: 6px;
		    position: relative;
		}
		.addUserDialog .list em {
		    float: left;
		    color: #f17e3f;
		    font-size: 14px;
		    font-style: normal;
		    font-weight: normal;
		    position: absolute;
		    top: 8px;
		    left: -10px;
		}
		.addUserDialog .list .inputText {
		    background-color: #FFF;
		    border: 1px solid #e7e7eb;
		    float: left;
		    height: 35px;
		    line-height: 35px;
		    padding-bottom: 10px;
		    padding-left: 6px;
		    padding-top: 10px;
		    width: 220px;
		}
		.addUserDialog .addressList {
		    width: 680px;
		}
		.dropDownBox {
		    cursor: pointer;
		    float: left;
		    height: 34px;
		    position: relative;
		    background-color: #FFF;
		    border: 1px solid #e7e7eb;
		    -webkit-border-radius: 2px;
		    border-radius: 2px;
		}
		.dropDownBox .comboxText {
		    background-color: #FFF;
		    margin-top: 7px;
		    padding-left: 8px;
		    padding-right: 26px;
		    border: 0 none;
		    cursor: pointer;
		    float: left;
		    height: 18px;
		    line-height: 18px;
		}
		.dropDownBox .comboxArrow {
		    background: url(http://www.poso2o.com/ECSHOP/style/img/mark.gif) 0 -58px no-repeat;
		    width: 18px;
		    height: 18px;
		    cursor: pointer;
		    opacity: .8;
		    position: absolute;
		    right: 2px;
		    top: 7px;
		    border-left: none;
		}
		.dropDownBox .pannel {
		    position: absolute;
		    /* display: none; */
		    background: #fff;
		    border: 1px #44b549 solid;
		    overflow: hidden;
		    z-index: 100;
		}
		.dropDownBox .pannel {
		    top: 34px;
		    max-height: 210px;
		    left: -1px;
		}
		.addUserDialog .addressList .pannel ul {
		    min-height: 180px;
		}
		.dropDownBox .pannel ul {
		    overflow: auto;
		    text-align: left;
		}
		.addUserDialog input,select{
			height:35px;
		}
		.addUserDialog select{
			width:130px;
		}
		
		
		
		.batchImportDialog .dialog_bd {
		    padding: 60px 90px;
		}
		.cf:after, .clearfix:after {
		    clear: both;
		    content: "";
		    display: block;
		    height: 0;
		    overflow: hidden;
		    visibility: hidden;
		}
		.batchImportDialog .addExcelBtn {
		    float: left;
		}
		.batchImportDialog .btn {
		    font-size: 14px;
		    color: #5E5E5E;
		    cursor: pointer;
		    float: left;
		    overflow: hidden;
		    text-align: center;
		    width: 130px;
		    margin-left: 10px;
		    text-align: center;
		    text-decoration: none;
		    height: 48px;
		    line-height: 36px;
		    border: 1px solid #B3B3B3;
		    background-color: #f6f6f6;
		    -webkit-border-radius: 2px;
		    -moz-border-radius: 2px;
		    border-radius: 2px;
		}
		#excelFile {
		    background: none repeat scroll 0 0 #FFFFFF;
		    -moz-opacity: 0.0;
		    -khtml-opacity: 0.0;
		    opacity: 0.0;
		    float: left;
		    width: 10px;
		}
		.batchImportDialog .downExcl {
		    float: left;
		    padding-top: 12px;
		    padding-left: 12px;
		}
		
    </style>
</head>
<body>
<div id="content">
    <!--会员信息-->
    <div class="rightarea clearfix">
        <div class="mainarea clearfix">
            <div class="mainhead">
                <span class="title">会员信息</span>
                <div class="searchArea">
                    <div class="btn-div">
                        <a href="javascript:;" class="btn btn-success" data-toggle="modal" data-target="#addUserDialog">
                            添加会员
                        </a>
                    </div>
                </div>
                <div class="list">
                    <a href="javascript:;" class="btn btn-default">导出会员</a>
                    <a href="javascript:;" class="btn btn-default" data-toggle="modal" data-target="#batchImportDialog">批量导入</a>
                </div>
                <div class="list search">
                    <input class="inputtext" type="text" placeholder="查找">
                    <a @click="cz" href="javascript:;" class="search-btn"></a>
                </div>
                <div class="list">
                    <select name="viptypeid" id="" class="form-control" @change="queryMember(1)">
                        <option value="全部等级" selected="selected">全部等级</option>
                       	 <template v-for="item in vipType">
                        	<option :value="item.viptypeId">{{item.viptypeName}}</option>
                        </template>
                    </select>
                </div>
            </div>
            <div class="mainbody">
                <table class="settable table table-striped">
                    <thead>
                        <tr>
                            <th width="4%">序号</th>
                            <th width="*">姓名</th>
                            <th width="12%">手机</th>
                            <th width="14%">等级</th>
                            <th width="10%">成交次数</th>
                            <th width="10%">成交金额</th>
                            <th width="10%">余额</th>
                            <th width="10%">积分</th>
                            <th width="10%">最近成交</th>
                            <th width="6%">操作</th>
                        </tr>
                    </thead>
                    <tbody>
                    <tr v-for="item,index in page.list">
                        <td>
                            {{item.vipId}}
                        </td>
                        <td>
                            {{item.vipName}}
                        </td>
                        <td class="nametd">
                           {{item.vipPhone}}
                        </td>
                        <td>{{item.viptypeName}}</td>
                        <td>{{item.vipTurnover}}</td>
                        <td>{{item.price}}</td>
                        <td>{{item.balance}}</td>
                        <td>{{item.integral}}</td>
                        <td v-if="item.zjcj!=null">{{item.zjcj}}</td>
                        <td v-else>0</td>
                        <td>
                            <a href="javascript:;">编辑</a>
                        </td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="5">合计</td>
                        <td class="total_num">&nbsp;</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    </tfoot>
                </table>
                <!--分页按钮-->
                <div class="pagebar">
                    <div class="pagetion">
                       <div class="page">
                               <ul class="pagination">
                                   <li>
                                       <a @click="queryMember(1)" href="javascript:;">
                                           首页
                                       </a>
                                   </li>
                                   <li>
                                       <a @click="queryMember(page.prePage)" href="javascript:;">
                                           &laquo;
                                       </a>
                                   </li>
                                   <li>
                                       <span style="font-size: 14px;">{{page.pageNum}}/{{page.pages}}</span>
                                   </li>
                                   <li>
                                       <a @click="queryMember(page.nextPage)" href="javascript:;">
                                           &raquo;
                                       </a>
                                   </li>
                                   <li>
                                       <a @click="queryMember(page.lastPage)" href="javascript:;">
                                           尾页
                                       </a>
                                   </li>
                                   <li style="margin-left: 20px; float:left;">
                                       <input name="tz" type="text" class="form-control" style="width: 100px;">
                                   </li>
                                   <li style="margin-left: 15px; float:left;">
                                       <a @click="tz" href="javascript:;" class="btn btn-default">
                                           跳转
                                       </a>
                                   </li>
                               </ul>
                       </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

	<!-- Modal -->
	<div class="modal fade addUserDialog dialog " id="addUserDialog" tabindex="-1" role="dialog" aria-spanledby="myModalspan">
	  <div class="modal-dialog" role="document" style="width:780px;">
	    <div class="modal-content">
	      <div class="modal-header" style="background-color: #f4f5f9;">
	        <button type="button" class="close" data-dismiss="modal" aria-span="Close"><span aria-hidden="true">&times;</span></button>
	        <h3 class="modal-title" id="myModalspan">添加会员</h3>
	      </div>
	      <div class="modal-body" style="height:290px;">
	      	
	      	<div class="dialog_bd clearfix">

				<div class="list"><span><em>*</em>手　机</span><input type="text" maxlength="11" value="" class="inputText" name="mobile"></div>
				<div class="list"><span><em>*</em>名　称</span><input type="text" maxlength="15" value="" class="inputText" name="nick"></div>
				<div class="list">
					<span>等　级</span>
					<div >
						<select>
							<option>请选择等级</option>
							 <template v-for="item in vipType">
	                        	<option :value="item.viptypeId">{{item.viptypeName}}</option>
	                        </template>
						</select>
					</div>
				</div>
				<div class="list"><span>密　码</span><input type="password" maxlength="16" value="" class="inputText" name="password"></div>
				<div class="list addressList CA_Area">
					<span>地　址</span>
					<div>
						<select>
							<option>请选择省份</option>
							<option>湖南省</option>
						</select>
						<select>
							<option>请选择市</option>
							<option>株洲市</option>
						</select>
						<select>
							<option>请选择区市</option>
							<option>天元区</option>
						</select>
					</div>
				</div>
				
				<div class="list" style="width:450px;">
					<span>街　道</span>
					<input style="width:370px;" type="password" maxlength="16" value="" name="password" class="inputText">
				</div>
			
				</div>
	      	
	      </div>
	      <div class="modal-footer" style="text-align: center;background-color: #f4f5f9;">
	        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	        <button type="button" class="btn btn-primary">确定</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- Modal -->
	<div class="modal fade batchImportDialog dialog " id="batchImportDialog" tabindex="-1" role="dialog" aria-spanledby="myModalspan">
	  <div class="modal-dialog" role="document" style="width:490px;">
	    <div class="modal-content">
	      <div class="modal-header" style="background-color: #f4f5f9;">
	        <button type="button" class="close" data-dismiss="modal" aria-span="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="myModalspan">批量导入</h4>
	      </div>
	      <div class="modal-body" style="height:180px;padding: 0px;">
	      	<div class="dialog_bd clearfix" style="">
				<label for="excelFile" class="btn addExcelBtn">Excel导入</label>
				<input type="file" name="file" class="file excelFile" id="excelFile">
				<a href="poso2o_batch_upload_user.xls" class="downExcl" @click="downloadExcel">下载范本</a>
			</div>
	      </div>
	    </div>
	  </div>
	</div>
</div>
   <script type="text/javascript">
   		var member_infovue = new Vue({
			el:"#content",
			data(){
				return {
					page:{
						list:[]
					},
					vipType:[]
				}
			},
			methods:{
				queryMember:function(pageNum){
					if(pageNum==0){
						return;
					}
					var viptypeid=$("[name=viptypeid]").val()
					var searchname=$("[placeholder=查找]").val()
					$.ajax({
						url:"[[@{member/queryMember}]]",
						data:{pageNum:pageNum,pageSize:2,viptypeid:viptypeid,searchname:searchname},
						success:function(result){
							member_infovue.page=result;
						}
					});
				},
				cz:function(){
					this.queryMember(1)
				},
				tz:function(){
					var tz=$("[name=tz]").val()
					this.queryMember(tz)
				},
				downloadExcel:function(){
					window.location.href="[[@{downloadExcel}]]"
				}
				/*del:function(id,index){
					$.ajax({
						url:"[[@{delete}]]",
						data:"id="+id,
						success:function(result){
							alert("删除成功");
							vue.list.splice(index,1);
							location.href="query";
						}
					});
				}*/
			},
			created:function(){
				var that = this;
				that.queryMember(1)
				$.ajax({
					url:"[[@{member/queryVipType}]]",
					success:function(result){
						that.vipType = result;
					}
				});
			}
		});
   </script>
</body>
</html>