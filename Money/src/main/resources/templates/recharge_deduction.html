<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/recharge_deduction.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <script th:src="@{js/jquery-1.12.4.js}"></script>
    <script th:src="@{js/bootstrap.js}"></script>
    <script type="text/javascript" th:src="@{js/vue.js}"></script>
    
</head>
<body>
<div id="content">
<!--充值抵扣-->
<div class="rightarea clearfix">
    <div class="mainarea clearfix">
        <div class="mainhead">
            <span class="title">充值抵扣</span>
            <div class="searchArea">
                <div class="btn-div">
                    <a href="javascript:;" class="btn btn-success">
                        充值
                    </a>
                </div>
            </div>

            <div class="list search">
                <input class="inputtext" type="text" placeholder="查找" name="name">
                <a href="javascript:;" class="search-btn" @click="queryRechargeDeductions"></a>
            </div>
            <div class="list">
                <input type="date" class="form-control" name="afterDate">
            </div>
            <div class="list">
                -
            </div>
            <div class="list">
                <input type="date" class="form-control" name="preDate">
            </div>
        </div>
        <div class="mainbody">
            <table class="settable table table-striped">
                <thead>
                    <tr>
                        <th width="4%">序号</th>
                        <th width="14%">时间</th>
                        <th width="9%">微信号</th>
                        <th width="*">姓名</th>
                        <th width="9%">手机</th>
                        <th width="8%">充值</th>
                        <th width="8%">赠送</th>
                        <th width="8%">消费</th>
                        <th width="8%">余额</th>
                        <th width="20%">备注</th>
                    </tr>
                </thead>
                <tbody>
                <tr v-for="item,index in list">
                    <td>
                        {{item.rdid}}
                    </td>
                    <td>{{item.rdDate}}
                    </td>
                    <td>{{item.rdVxid}}
                    </td>
                    <td >{{item.rdName}}
                    </td>
                    <td>{{item.rdPhone}}</td>
                    <td>{{item.rdRecharge}}</td>
                    <td>{{item.rdPresentation}}</td>
                    <td>{{item.rdExpenditure}}</td>
                    <td>{{item.rdBalance}}</td>
                    <td>{{item.rdRemark}}</td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="5">合计</td>
                    <td class="total_add_amounts">0.00</td>
                    <td class="zengsong_amount">0.00</td>
                    <td class="total_del_amounts">0.00</td>
                    <td class="total_amounts">-</td>
                    <td>-</td>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
</div>
<script type="text/javascript">
   		var recharge_deductionvue = new Vue({
			el:"#content",
			data(){
				return {
					list:[]
				}
			},
			methods:{
				queryRechargeDeductions:function(){
					var preDate=$("[name=preDate]").val()
					var afterDate=$("[name=afterDate]").val()
					var name=$("[name=name]").val()
					$.ajax({
						url:"[[@{member/queryRechargeDeductions}]]",
						data:{preDate:preDate,afterDate:afterDate,name:name},
						success:function(result){
							recharge_deductionvue.list=result;
							total_add_amounts=0
					   		zengsong_amount=0
					   		total_del_amounts=0
							$(result).each(function(i,obj){
								total_add_amounts+=parseInt(obj.rdRecharge)
								zengsong_amount+=parseInt(obj.rdPresentation)
								total_del_amounts+=parseInt(obj.rdExpenditure)
							})
							$("[class=total_add_amounts]").text(total_add_amounts)
							$("[class=zengsong_amount]").text(zengsong_amount)
							$("[class=total_del_amounts]").text(total_del_amounts)
						}
					});
				}
			},
			created:function(){
				var that = this;
				that.queryRechargeDeductions()
			}
		});
   		var total_add_amounts=0
   		var zengsong_amount=0
   		var total_del_amounts=0
   </script>
</body>
</html>